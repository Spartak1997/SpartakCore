package com.spartakcore.bartworksHandler;

import com.github.bartimaeusnek.bartworks.MainMod;
import com.github.bartimaeusnek.bartworks.common.items.SimpleSubItemClass;
import com.github.bartimaeusnek.bartworks.util.BW_Util;

import cpw.mods.fml.common.Loader;
import cpw.mods.fml.common.registry.GameRegistry;
import gregtech.api.enums.ItemList;
import gregtech.api.enums.Materials;
import gregtech.api.enums.OrePrefixes;
import gregtech.api.objects.GT_Fluid;
import gregtech.api.util.GT_ModHandler;
import gregtech.api.util.GT_OreDictUnificator;
import gregtech.api.util.GT_Utility;
import net.minecraft.init.Items;
import net.minecraft.item.Item;
import net.minecraft.item.ItemStack;
import net.minecraftforge.fluids.FluidRegistry;
import net.minecraftforge.fluids.FluidStack;
import net.minecraftforge.oredict.OreDictionary;

import static com.spartakcore.bartworksHandler.BacteriaRegistry.CultureSet;
import static com.spartakcore.gthandler.GT_CoreModSupport.*;
import static com.github.bartimaeusnek.bartworks.API.BioRecipeAdder.addBacterialVatRecipe;
import static gregtech.api.enums.GT_Values.*;

public class BioItemLoader {
    private static final Item BIOTEMS;
    private static final GT_Fluid[] BIOFLUIDS;
    private static ItemStack[] BIOTEMSSTACKS;
    static {

        BIOTEMS = new SimpleSubItemClass(new String[]{"itemCollagen","itemGelatin","itemAgar"}).setCreativeTab(MainMod.BIO_TAB);
        GameRegistry.registerItem(BIOTEMS,"SpartakCoreBioItems","bartworks");
        BIOTEMSSTACKS = new ItemStack[]{
                new ItemStack(BIOTEMS,1,0),
                new ItemStack(BIOTEMS,1,1),
                new ItemStack(BIOTEMS,1,2),

        };
        BIOFLUIDS = new GT_Fluid[]{
                new GT_Fluid("GelatinMixture", "molten.autogenerated", new short[]{255, 255, 125}),
                new GT_Fluid("MeatExtract", "molten.autogenerated", new short[]{160, 70, 50}),
                new GT_Fluid("UnknownNutrientAgar", "molten.autogenerated", new short[]{175, 133, 0}),
                new GT_Fluid("SeaweedBroth", "molten.autogenerated", new short[]{60, 200, 0})
        };

        for (GT_Fluid gtFluid : BIOFLUIDS){
                FluidRegistry.registerFluid(gtFluid);
        }

        RA.addChemicalRecipe(
                Materials.MeatRaw.getDust(2),new ItemStack(Items.bone,2),Materials.DilutedSulfuricAcid.getFluid(500),
                Materials.Water.getFluid(500),BIOTEMSSTACKS[0],
             800,480
        );

        RA.addChemicalRecipe(
                BIOTEMSSTACKS[0],Materials.Water.getCells(1),Materials.PhosphoricAcid.getFluid(1000),
                new FluidStack(BIOFLUIDS[0],2000),Materials.Empty.getCells(1),
                400,480
        );
        RA.addChemicalRecipe(
                BIOTEMSSTACKS[0],Materials.PhosphoricAcid.getCells(1),Materials.Water.getFluid(1000),
                new FluidStack(BIOFLUIDS[0],2000),Materials.Empty.getCells(1),
                400,480
        );

        RA.addCentrifugeRecipe(
                GT_Utility.getIntegratedCircuit(1),NI,new FluidStack(BIOFLUIDS[0],4000),
                NF,Materials.Phosphorus.getDust(1),BIOTEMSSTACKS[1],NI,NI,NI,NI,
                null,600,480
        );

        RA.addMixerRecipe(
                GT_Utility.getIntegratedCircuit(11),BIOTEMSSTACKS[1],NI,NI,NI,NI, GT_ModHandler.getDistilledWater(1000),
                NF,BIOTEMSSTACKS[2],600,480
        );

        RA.addFluidExtractionRecipe(
                Materials.MeatRaw.getDust(1),
                NI,new FluidStack(BIOFLUIDS[1],125),
                0,300,120
        );

        if (Loader.isModLoaded("GalaxySpace")) {
        RA.addMultiblockChemicalRecipe(
                new ItemStack[]{
                        BIOTEMSSTACKS[2].copy().splitStack(8),
                        ItemList.Circuit_Chip_Stemcell.get(16),
                        Materials.Salt.getDust(64)
                },
                new FluidStack[]{
                        FluidRegistry.getFluidStack("unknowwater",4000),
                        Materials.PhthalicAcid.getFluid(3000),
                        new FluidStack(BIOFLUIDS[1],1000)
                },
                new FluidStack[]{
                        new FluidStack(BIOFLUIDS[2],8000)
                },
                null,
                1600, BW_Util.getMachineVoltageFromTier(8)
        );
        }else {
        	RA.addMultiblockChemicalRecipe(
                    new ItemStack[]{
                            BIOTEMSSTACKS[2].copy().splitStack(8),
                            ItemList.Circuit_Chip_Stemcell.get(16),
                            Materials.Salt.getDust(64)
                    },
                    new FluidStack[]{
                    		Materials.BacterialSludge.getFluid(4000),
                            Materials.PhthalicAcid.getFluid(3000),
                            new FluidStack(BIOFLUIDS[1],1000)
                    },
                    new FluidStack[]{
                            new FluidStack(BIOFLUIDS[2],8000)
                    },
                    null,
                    1600, BW_Util.getMachineVoltageFromTier(8)
            );
        }
        
        for (byte i=0; i<OreDictionary.getOres("treeSapling").size();++i) {
        if (Loader.isModLoaded("harvestcraft")) {
        addBacterialVatRecipe(
                new ItemStack[]{
                        ItemList.IC2_Energium_Dust.get(9),
                        Materials.Oriharukon.getDust(1),
                        GT_ModHandler.getModItem("harvestcraft","seaweedItem",64)
                },
                CultureSet.get("TcetiEBac"),
                new FluidStack[]{new FluidStack(BIOFLUIDS[2],8000)},
                new FluidStack[]{new FluidStack(BIOFLUIDS[3],50)},
                1200,BW_Util.getMachineVoltageFromTier(8),100,8,0,false
        );
        addBacterialVatRecipe(
                new ItemStack[]{
                        ItemList.IC2_Energium_Dust.get(18),
                        Materials.Oriharukon.getDust(6),
                        OreDictionary.getOres("treeSapling").get(i).copy().splitStack(64)
                },
                CultureSet.get("TcetiEBac"),
                new FluidStack[]{new FluidStack(BIOFLUIDS[2],8000)},
                new FluidStack[]{new FluidStack(BIOFLUIDS[3],50)},
                3600,BW_Util.getMachineVoltageFromTier(8),100,8,0,false);
        }else {
        	addBacterialVatRecipe(
                    new ItemStack[]{
                            ItemList.IC2_Energium_Dust.get(18),
                            Materials.Oriharukon.getDust(6),
                            OreDictionary.getOres("treeSapling").get(i).copy().splitStack(64)
                    },
                    CultureSet.get("TcetiEBac"),
                    new FluidStack[]{new FluidStack(BIOFLUIDS[2],8000)},
                    new FluidStack[]{new FluidStack(BIOFLUIDS[3],50)},
                    3600,BW_Util.getMachineVoltageFromTier(8),100,8,0,false);
        	}
        }
            RA.addCentrifugeRecipe(GT_Utility.getIntegratedCircuit(1),NI,new FluidStack(BIOFLUIDS[3],1000),NF,GT_ModHandler.getModItem("GalaxySpace", "tcetiedandelions", 1L, 0),NI,NI,NI,NI,NI,null,40,BW_Util.getMachineVoltageFromTier(8));
    }

}